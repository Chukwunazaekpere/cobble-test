{"ast":null,"code":"import _objectSpread from\"/home/chukwunazaekpere/Documents/Fullstack/javascript/NodeJS/cobble/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/chukwunazaekpere/Documents/Fullstack/javascript/NodeJS/cobble/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/chukwunazaekpere/Documents/Fullstack/javascript/NodeJS/cobble/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/chukwunazaekpere/Documents/Fullstack/javascript/NodeJS/cobble/frontend/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import React,{useEffect,useState}from'react';import{useDispatch}from'react-redux';import{showProcessingGifAction,toggleConfirmAction,toggleModalAction}from'../redux/actions/appActions';import\"../styles/ModalStyles.css\";import{pascalCaseSeparator}from'../validators';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Confirm=function Confirm(props){console.log(\"\\n\\t Confirm...\");var dispatch=useDispatch();var _useState=useState({\"accomodationStatus\":'',\"rentAmount\":0,\"monthlyIncome\":0,\"paymentPlan\":\"\"}),_useState2=_slicedToArray(_useState,2),formDataPreview=_useState2[0],setFormDataPreview=_useState2[1];var toggleModal=function toggleModal(action){if(action.toLowerCase()==='edit'){dispatch(toggleConfirmAction(false));return dispatch(toggleModalAction(true));}sendRequest();dispatch(showProcessingGifAction({showGif:true,gifStatus:\"loading\",gifMessage:\"Please wait. Cobble is processing your request...\"}));};useEffect(function(){setFormDataPreview({\"accomodationStatus\":props.formData[\"Accomodation Status\"],\"monthlyIncome\":props.formData[\"Monthly Income\"],\"paymentPlan\":props.formData[\"Payment Plan\"],\"rentAmount\":props.formData[\"Rent Amount\"]});},[props.formData]);var actionBtns=[\"Accept\",\"Edit\"];var sendRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,message,_message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_REMOTE_SERVER,\"/rent/rent-request\"),_objectSpread({},formDataPreview),{headers:{\"Content-Type\":\"application/json\"}});case 3:response=_context.sent;message=response.data.message;dispatch(toggleConfirmAction(false));dispatch(toggleModalAction(false));setTimeout(function(){dispatch(showProcessingGifAction({showGif:true,gifStatus:\"success\",gifMessage:message}));},4000);setTimeout(function(){dispatch(showProcessingGifAction({showGif:false,gifStatus:\"loading\",gifMessage:\"\"}));window.location.reload();},10000);_context.next=17;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"\\n\\t Error: \",_context.t0.response);_message=_context.t0.response?_context.t0.response.data.message:\"Network error\";setTimeout(function(){dispatch(showProcessingGifAction({showGif:true,gifStatus:\"error\",gifMessage:_message}));},4000);setTimeout(function(){dispatch(showProcessingGifAction({showGif:false,gifStatus:\"loading\",gifMessage:\"\"}));},10000);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function sendRequest(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"modal d-flex justify-content-center align-items-center ml-5 animate__animated animate__bounce\",role:\"dialog\",id:\"modal\",tabIndex:-1,children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\" text-teal-500 text-2xl font-serif\",children:\"Please confirm the inputted details\"})}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-body\",children:formDataPreview&&Object.keys(formDataPreview).map(function(data){return/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-serif\",children:[pascalCaseSeparator(data),\":\"]}),/*#__PURE__*/_jsx(\"label\",{className:\"font-serif\",htmlFor:\"\",children:parseInt(formDataPreview[data])?(+formDataPreview[data]).toLocaleString():formDataPreview[data]}),/*#__PURE__*/_jsx(\"hr\",{})]},data);})}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-footer\",children:actionBtns.map(function(btns){return/*#__PURE__*/_jsx(\"button\",{\"data-target\":\"#modal\",\"data-toggle\":\"modal\",onClick:function onClick(){return toggleModal(btns);},\"data-dismiss\":\"\".concat(btns.toLowerCase()==='cancel'?'modal':undefined),className:\"font-serif btn \".concat(btns.toLowerCase()==='accept'?'bg-blue-900':'btn-secondary',\" text-white\"),children:btns},btns);})})]})})});};export default Confirm;","map":{"version":3,"sources":["/home/chukwunazaekpere/Documents/Fullstack/javascript/NodeJS/cobble/frontend/src/components/Confirm.tsx"],"names":["axios","React","useEffect","useState","useDispatch","showProcessingGifAction","toggleConfirmAction","toggleModalAction","pascalCaseSeparator","Confirm","props","console","log","dispatch","formDataPreview","setFormDataPreview","toggleModal","action","toLowerCase","sendRequest","showGif","gifStatus","gifMessage","formData","actionBtns","post","process","env","REACT_APP_REMOTE_SERVER","headers","response","message","data","setTimeout","window","location","reload","Object","keys","map","parseInt","toLocaleString","btns","undefined"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { showProcessingGifAction, toggleConfirmAction, toggleModalAction } from '../redux/actions/appActions';\nimport \"../styles/ModalStyles.css\"\nimport { pascalCaseSeparator } from '../validators';\nimport { FormDataInterface } from './Modal';\nimport ProcessingGif from './ProcessingGif';\n\n\ninterface Props {\n    formData: any\n}\n\nconst Confirm = (props: Props) => {\n    console.log(\"\\n\\t Confirm...\")\n    const dispatch = useDispatch();\n    const [formDataPreview, setFormDataPreview] = useState({\n        \"accomodationStatus\": '', \n        \"rentAmount\": 0, \n        \"monthlyIncome\": 0, \n        \"paymentPlan\": \"\"\n    })\n\n    const toggleModal = (action: string) => {\n        if(action.toLowerCase() === 'edit'){\n            dispatch(toggleConfirmAction(false))\n            return dispatch(toggleModalAction(true));\n        }\n        sendRequest();\n        dispatch(showProcessingGifAction({\n            showGif: true,\n            gifStatus: \"loading\",\n            gifMessage: \"Please wait. Cobble is processing your request...\"\n        }));\n    }\n  \n    useEffect(() => {\n        setFormDataPreview({\n            \"accomodationStatus\": props.formData[\"Accomodation Status\"],\n            \"monthlyIncome\": props.formData[\"Monthly Income\"],\n            \"paymentPlan\": props.formData[\"Payment Plan\"],\n            \"rentAmount\": props.formData[\"Rent Amount\"]\n        })\n    }, [props.formData])\n    const actionBtns = [\"Accept\", \"Edit\"];\n\n    const sendRequest = async() => {\n        try {\n            const response = await axios.post(`${process.env.REACT_APP_REMOTE_SERVER}/rent/rent-request`, {...formDataPreview}, {\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            const message = response.data.message;\n            dispatch(toggleConfirmAction(false));\n            dispatch(toggleModalAction(false));\n            setTimeout(() => {\n                dispatch(showProcessingGifAction({\n                    showGif: true,\n                    gifStatus: \"success\",\n                    gifMessage: message\n                }));\n            }, 4000);\n            setTimeout(() => {\n                dispatch(showProcessingGifAction({\n                    showGif: false,\n                    gifStatus: \"loading\",\n                    gifMessage: \"\"\n                }));\n                window.location.reload()\n            }, 10000)\n        } catch (error: any) {\n            console.log(\"\\n\\t Error: \", error.response)\n            const message = error.response ? error.response.data.message : \"Network error\";\n            setTimeout(() => {\n                dispatch(showProcessingGifAction({\n                    showGif: true,\n                    gifStatus: \"error\",\n                    gifMessage: message\n                }));\n            }, 4000)\n            setTimeout(() => {\n                dispatch(showProcessingGifAction({\n                    showGif: false,\n                    gifStatus: \"loading\",\n                    gifMessage: \"\"\n                }));\n            }, 10000)\n        }\n    }\n    return (\n        <div className=\"modal d-flex justify-content-center align-items-center ml-5 animate__animated animate__bounce\"  role=\"dialog\" id=\"modal\" tabIndex={-1}>\n            <div className=\"modal-dialog\" role=\"\">\n                <div className=\"modal-content\">\n                    <section className=\"modal-header\">\n                        <p className=\" text-teal-500 text-2xl font-serif\">Please confirm the inputted details</p>\n                    </section>\n                    <section className=\"modal-body\">\n                        {\n                            formDataPreview && Object.keys(formDataPreview).map(data => (\n                                <article key={data}>\n                                    <p className=\"font-serif\">{pascalCaseSeparator(data)}:</p>\n                                    <label className=\"font-serif\" htmlFor=\"\">{parseInt((formDataPreview as any)[data] as any) ? (+(formDataPreview as any)[data]).toLocaleString() : (formDataPreview as any)[data]}</label>\n                                    <hr />\n                                </article>\n                            ))\n                        }\n                    </section>\n                    <section className=\"modal-footer\">\n                        {\n                            actionBtns.map(btns => (\n                                <button \n                                    key={btns} \n                                    data-target=\"#modal\"\n                                    data-toggle=\"modal\"\n                                    onClick={() => toggleModal(btns)}\n                                    data-dismiss={`${btns.toLowerCase() === 'cancel' ? 'modal' : undefined }`}\n                                    className={`font-serif btn ${btns.toLowerCase() === 'accept' ? 'bg-blue-900' : 'btn-secondary'} text-white`}>\n                                    {btns}\n                                </button>\n                            ))\n                        }\n                    </section>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Confirm;\n\n\n"]},"metadata":{},"sourceType":"module"}